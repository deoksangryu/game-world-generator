<section class="panel">
  <h2 class="section-title">ğŸ¨ ì„¸ê³„ê´€ ì‘ì„±
    <div class="header-actions">
      <span class="server-status" [class.connected]="serverConnected" [class.disconnected]="!serverConnected">
        {{ serverConnected ? 'ğŸŸ¢ ì„œë²„ ì—°ê²°ë¨' : 'ğŸ”´ ì„œë²„ ì—°ê²° ì•ˆë¨' }}
      </span>
      <button type="button" class="sample-btn action-btn" (click)="loadSample()">ğŸ” ìƒ˜í”Œ ë¶ˆëŸ¬ì˜¤ê¸°</button>
      <button type="button" class="clear-btn action-btn" (click)="clearData()" *ngIf="generatedWorld">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
    </div>
  </h2>

  <!-- ìƒíƒœ ë©”ì‹œì§€ -->
  <div class="status-messages">
    <div class="error-message" *ngIf="errorMessage">âŒ {{ errorMessage }}</div>
    <div class="success-message" *ngIf="successMessage">âœ… {{ successMessage }}</div>
  </div>

  <!-- Form -->
  <form *ngIf="!generatedWorld" (ngSubmit)="generateWorld()" class="world-form">
    <div class="form-group">
      <label class="form-label">ì¥ë¥´ ì„ íƒ</label>
      <div class="genre-grid">
        <div class="genre-card" *ngFor="let g of genres" [class.selected]="worldData.genre===g.value" (click)="selectGenre(g.value)">
          <div class="genre-icon">{{ g.icon }}</div>
          <div class="genre-name">{{ g.label }}</div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">ê²Œì„ ì œëª© *</label>
      <input class="form-input" [(ngModel)]="worldData.gameTitle" name="title" placeholder="ê²Œì„ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required />
    </div>

    <div class="form-group">
      <label class="form-label">ê¸°ë³¸ ì„¤ì • *</label>
      <textarea class="form-input textarea" rows="3" [(ngModel)]="worldData.basicSetting" name="basicSetting" placeholder="ê²Œì„ì˜ ë°°ê²½ê³¼ ì„¤ì •ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
    </div>

    <div class="form-group">
      <label class="form-label">ì£¼ìš” ê°ˆë“±</label>
      <textarea class="form-input textarea" rows="3" [(ngModel)]="worldData.mainConflict" name="mainConflict" placeholder="ì„¸ê³„ì˜ ì£¼ìš” ê°ˆë“±ì´ë‚˜ ë¬¸ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
    </div>

    <div class="form-group">
      <label class="form-label">íŠ¹ë³„í•œ ìš”ì†Œ</label>
      <textarea class="form-input textarea" rows="3" [(ngModel)]="worldData.uniqueElements" name="uniqueElements" placeholder="ë…íŠ¹í•œ ì„¤ì •ì´ë‚˜ ë§ˆë²• ì‹œìŠ¤í…œ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
    </div>

    <div class="button-group">
      <button type="submit" class="generate-btn primary" [disabled]="isGenerating || !serverConnected">
        <span *ngIf="!isGenerating">ğŸ¨ ì„¸ê³„ê´€ ìƒì„±</span>
        <span *ngIf="isGenerating"><span class="spinner"></span> ìƒì„± ì¤‘...</span>
      </button>

      <button type="button" class="generate-btn full" (click)="generateFullWorld()" [disabled]="isGenerating || !serverConnected">
        <span *ngIf="!isGenerating">âœ¨ í†µí•© ìƒì„± (ì´ë¯¸ì§€ í¬í•¨)</span>
        <span *ngIf="isGenerating"><span class="spinner"></span> í†µí•© ìƒì„± ì¤‘...</span>
      </button>
    </div>

    <p class="form-note">* í•„ìˆ˜ í•­ëª©</p>
  </form>

  <!-- Preview -->
  <div *ngIf="generatedWorld" class="preview-box">
    <h3 class="preview-title">ğŸŒ {{ generatedWorld.theme }}</h3>
    <div class="preview-content">
      <div class="preview-setting">
        <strong>ğŸ“ ë°°ê²½:</strong> {{ generatedWorld.setting }}
      </div>
      <div class="preview-description">
        <strong>ğŸ“– ì„¸ê³„ê´€ ì„¤ëª…:</strong>
        <p>{{ generatedWorld.expandedWorldDescription }}</p>
      </div>
    </div>

    <div class="preview-actions">
      <button class="action-btn secondary" (click)="clearData()">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
      <button class="action-btn primary" (click)="checkServerConnection()">ğŸ”„ ì„œë²„ ìƒíƒœ ìƒˆë¡œê³ ì¹¨</button>
    </div>
  </div>
</section> 