<!-- 
====================================
í€˜ìŠ¤íŠ¸ ë·°ì–´ ì»´í¬ë„ŒíŠ¸ í…œí”Œë¦¿
====================================
NPCê°€ ì œê³µí•˜ëŠ” í€˜ìŠ¤íŠ¸ì˜ ìƒì„¸ ì •ë³´ë¥¼ í‘œì‹œí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

ì£¼ìš” êµ¬ì„±:
1. í€˜ìŠ¤íŠ¸ í—¤ë” - ì´ë¦„, ì¢…ë¥˜, ë‚œì´ë„ ë°°ì§€
2. í€˜ìŠ¤íŠ¸ ì •ë³´ - ì†Œìš”ì‹œê°„, ì§„í–‰ë¥ , í”„ë¡œê·¸ë ˆìŠ¤ ë°”
3. í€˜ìŠ¤íŠ¸ ì„¤ëª… - ìŠ¤í† ë¦¬ ë° ë°°ê²½ ì„¤ëª…
4. ëª©í‘œ ëª©ë¡ - ì™„ë£Œí•´ì•¼ í•  ëª©í‘œë“¤ê³¼ ì§„í–‰ ìƒíƒœ
5. ë³´ìƒ ëª©ë¡ - ì™„ë£Œ ì‹œ ë°›ì„ ìˆ˜ ìˆëŠ” ë³´ìƒë“¤
6. ì„ í–‰ ì¡°ê±´ - í€˜ìŠ¤íŠ¸ ìˆ˜í–‰ì„ ìœ„í•œ í•„ìˆ˜ ì¡°ê±´ë“¤
-->

<div class="quest-viewer-container">
  <!-- ==================== í€˜ìŠ¤íŠ¸ í—¤ë” (ì´ë¦„/ë°°ì§€) ==================== -->
  <div class="quest-header">
    <!-- í€˜ìŠ¤íŠ¸ ì´ë¦„ -->
    <h4 class="quest-name">{{ quest.name }}</h4>
    <!-- í€˜ìŠ¤íŠ¸ ë¶„ë¥˜ ë°°ì§€ë“¤ -->
    <div class="quest-badges">
      <!-- í€˜ìŠ¤íŠ¸ ì¢…ë¥˜ ë°°ì§€ (ë©”ì¸, ì‚¬ì´ë“œ ë“±) -->
      <span class="quest-type" [style.background-color]="getQuestTypeColor(quest.questType)">
        {{ getQuestTypeText(quest.questType) }}
      </span>
      <!-- ë‚œì´ë„ ë°°ì§€ (ì‰¬ì›€, ë³´í†µ, ì–´ë ¤ì›€ ë“±) -->
      <span class="quest-difficulty" [style.background-color]="getDifficultyColor(quest.difficulty)">
        {{ getDifficultyText(quest.difficulty) }}
      </span>
    </div>
  </div>

  <!-- ==================== í€˜ìŠ¤íŠ¸ ë©”íƒ€ ì •ë³´ ==================== -->
  <div class="quest-info">
    <!-- í€˜ìŠ¤íŠ¸ ê¸°ë³¸ ì •ë³´ -->
    <div class="quest-meta">
      <!-- ì˜ˆìƒ ì†Œìš”ì‹œê°„ -->
      <div class="meta-item">
        <span class="meta-label">ì˜ˆìƒ ì†Œìš”ì‹œê°„:</span>
        <span class="meta-value">{{ formatTime(quest.estimatedTime) }}</span>
      </div>
      <!-- ëª©í‘œ ì™„ë£Œ í˜„í™© -->
      <div class="meta-item">
        <span class="meta-label">ì§„í–‰ë¥ :</span>
        <span class="meta-value">{{ getCompletedObjectivesCount() }}/{{ quest.objectives.length }}</span>
      </div>
    </div>

    <!-- ì§„í–‰ë¥  í”„ë¡œê·¸ë ˆìŠ¤ ë°” -->
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
    </div>
  </div>

  <!-- ==================== í€˜ìŠ¤íŠ¸ ì„¤ëª… ==================== -->
  <div class="quest-description">
    <p>{{ quest.description }}</p>
  </div>

  <!-- ==================== í€˜ìŠ¤íŠ¸ ëª©í‘œ ëª©ë¡ ==================== -->
  <div class="quest-objectives">
    <h5>ğŸ“‹ ëª©í‘œ</h5>
    <div class="objectives-list">
      <!-- ê°œë³„ ëª©í‘œ ì•„ì´í…œ (ì™„ë£Œ ìƒíƒœì— ë”°ë¼ ìŠ¤íƒ€ì¼ ë³€ê²½) -->
      <div *ngFor="let objective of quest.objectives" 
           class="objective-item" 
           [class.completed]="objective.completed">
        <!-- ëª©í‘œ ë‚´ìš© -->
        <div class="objective-content">
          <!-- ëª©í‘œ ì¢…ë¥˜ ì•„ì´ì½˜ -->
          <span class="objective-icon">{{ getObjectiveTypeIcon(objective.type) }}</span>
          <!-- ëª©í‘œ ì„¤ëª… í…ìŠ¤íŠ¸ -->
          <span class="objective-text">{{ objective.description }}</span>
          <!-- ìˆ˜ëŸ‰ ì •ë³´ (ìˆëŠ” ê²½ìš°) -->
          <span *ngIf="objective.quantity" class="objective-quantity">
            ({{ objective.quantity }})
          </span>
        </div>
        <!-- ì™„ë£Œ ìƒíƒœ í‘œì‹œ -->
        <div class="objective-status">
          <span *ngIf="objective.completed" class="status-complete">âœ“</span>
          <span *ngIf="!objective.completed" class="status-pending">â—‹</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== í€˜ìŠ¤íŠ¸ ë³´ìƒ ëª©ë¡ ==================== -->
  <div class="quest-rewards">
    <h5>ğŸ† ë³´ìƒ</h5>
    <div class="rewards-list">
      <!-- ê°œë³„ ë³´ìƒ ì•„ì´í…œ -->
      <div *ngFor="let reward of quest.rewards" class="reward-item">
        <!-- ë³´ìƒ ì¢…ë¥˜ ì•„ì´ì½˜ -->
        <span class="reward-icon">{{ getRewardTypeIcon(reward.type) }}</span>
        <!-- ë³´ìƒ ë‚´ìš© í…ìŠ¤íŠ¸ -->
        <span class="reward-text">
          {{ getRewardTypeText(reward.type) }} {{ reward.amount }}
          <!-- ì•„ì´í…œ ì´ë¦„ (ìˆëŠ” ê²½ìš°) -->
          <span *ngIf="reward.itemName" class="reward-item-name">({{ reward.itemName }})</span>
        </span>
      </div>
    </div>
  </div>

  <!-- ==================== ì„ í–‰ ì¡°ê±´ (ìˆëŠ” ê²½ìš°ì—ë§Œ) ==================== -->
  <div class="quest-prerequisites" *ngIf="quest.prerequisites && quest.prerequisites.length > 0">
    <h5>âš ï¸ ì„ í–‰ ì¡°ê±´</h5>
    <div class="prerequisites-list">
      <!-- ê°œë³„ ì„ í–‰ ì¡°ê±´ íƒœê·¸ -->
      <span *ngFor="let prerequisite of quest.prerequisites" class="prerequisite-tag">
        {{ prerequisite }}
      </span>
    </div>
  </div>
</div> 